(function(){var e={};String.format=function(t){if(~t.indexOf("#{")){for(var n="",r=0,o=arguments[1];;){var l=t.indexOf("#{",r);if(-1==l)break;n+=t.substring(r,l);var i=t.indexOf("}",l);n+=Object.getProperty(o,t.substring(l+2,i)),r=++i}return n+=t.substring(r)}for(var s=1;arguments.length>s;s++){var u=e[s]||(e[s]=RegExp("%"+s,"g"));t=t.replace(u,arguments[s])}return t},Object.defaults=function(e,t){for(var n in t)null==e[n]&&(e[n]=t[n]);return e},Object.clear=function(e,t){if(t instanceof Array)for(var n,r=0,o=t.length;o>r;r++)n=t[r],n in e&&delete e[n];else if("object"==typeof t)for(var l in t)l in e&&delete e[l];return e},Object.extend=function(e,t){if(null==e&&(e={}),null==t)return e;for(var n in t)null!=t[n]&&(e[n]=t[n]);return e},Object.getProperty=function(e,t){if("."===t)return e;for(var n=e,r="string"==typeof t?t.split("."):t,o=-1,l=r.length;null!=n&&l>++o;)n=n[r[o]];return n},Object.setProperty=function(e,t,n){for(var r=t.split("."),o=e,l=r[r.length-1];r.length>1;){var i=r.shift();o=o[i]||(o[i]={})}o[l]=n},Object.lazyProperty=function(e,t,n){if("object"!=typeof t){for(var r=t.split("."),o=e,l=r[r.length-1];r.length>1;){var i=r.shift();o=o[i]||(o[i]={})}r=null,o.__defineGetter__(l,function(){return delete o[l],o[l]=n(),n=null,o[l]})}else for(var s in t)Object.lazyProperty(e,s,t[s])},Object.observe=function(e,t,n){if(null==e.__observers&&Object.defineProperty(e,"__observers",{value:{},enumerable:!1}),e.__observers[t])return e.__observers[t].push(n),void 0;(e.__observers[t]||(e.__observers[t]=[])).push(n);var r=t.split("."),o=e,l=t;r.length>1&&(l=r.pop(),o=Object.getProperty(e,r));var i=o[l];Object.defineProperty(o,l,{get:function(){return i},set:function(n){i=n;for(var r=e.__observers[t],o=0,l=r.length;l>o;o++)r[o](n)}})},Date.format=function(e,t){function n(e){return e>9?e:"0"+e}t||(t="MM/dd/yyyy"),t=t.replace("MM",n(e.getMonth()+1));var r=e.getFullYear();return t.indexOf("yyyy")>-1?t=t.replace("yyyy",r):t.indexOf("yy")>-1&&(t=t.replace("yy",(""+r).substr(2,2))),t=t.replace("dd",n(e.getDate())),t.indexOf("HH")>-1&&(t=t.replace("HH",n(e.getHours()))),t.indexOf("mm")>-1&&(t=t.replace("mm",n(e.getMinutes()))),t.indexOf("ss")>-1&&(t=t.replace("ss",n(e.getSeconds()))),t},RegExp.fromString=function(e,t){return RegExp(e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&"),t)},Function.invoke=function(){var e=Array.prototype.slice.call(arguments),t=e.shift(),n=e.shift();return function(){return t[n].apply(t,e)}}})();